{"ast":null,"code":"import { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ApisService } from \"../services/apis.service\";\nimport { Location } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/apis.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"ng-otp-input\";\nfunction VerificationComponent_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 24);\n  }\n}\nconst _c0 = function () {\n  return {\n    length: 4\n  };\n};\nexport let VerificationComponent = /*#__PURE__*/(() => {\n  class VerificationComponent {\n    constructor(formBuilder, route, router, api, location) {\n      this.formBuilder = formBuilder;\n      this.route = route;\n      this.router = router;\n      this.api = api;\n      this.location = location;\n      this.loading = false;\n      this.submitted = false;\n    }\n    goBack() {\n      // this.router.navigate(['card-details']);\n      this.location.back();\n    }\n    ngOnInit() {\n      this.form = this.formBuilder.group({\n        token: ['', Validators.required]\n      });\n      this.route.queryParams.subscribe(params => {\n        if (params && params.id) {\n          this.admin_id = params.id;\n          console.log(\"ADMIN IS ID \", this.admin_id);\n        }\n      }, err => {\n        console.log(err);\n      });\n    }\n    onOtpChange(e) {\n      console.log(\"VALUE COMIN--- \", e);\n      this.otp = e;\n    }\n    get f() {\n      return this.form.controls;\n    }\n    onSubmit() {\n      this.submitted = true;\n      this.loading = true;\n      // this.loginVal = JSON.stringify(this.form.value);\n      // let formData: any = this.form.value as {};\n      // this.jsonBody = JSON.parse(this.loginVal);\n      // console.log(\"LETS SEE THE jsonBody VAL \" + this.jsonBody);\n      console.log(\"LETS SEE THE ADmin VAL \" + this.admin_id);\n      console.log(\"LETS SEE THE OTP VAL \" + this.otp);\n      // console.log(\"LETS SEE THE LOGIN VAL2 \" + formData.token);\n      // this.params = {\n      //   id: this.admin_id,\n      //   token: formData.token,\n      // }\n      this.params = {\n        id: this.admin_id,\n        token: this.otp\n      };\n      console.log(\"PARAMS TO SEND \" + this.params);\n      this.api.verify(this.params).then(result => {\n        var results_body = result;\n        console.log(\"results\", result);\n        console.log(\"REVIEW RESULTS BODY \" + results_body[\"data\"][\"token\"]);\n        var token = results_body[\"data\"][\"token\"];\n        var status = results_body[\"status\"];\n        var full_name = results_body[\"data\"][\"full_name\"];\n        var email = results_body[\"data\"][\"email\"];\n        console.log(\"token \" + token);\n        console.log(\"status \" + status);\n        console.log(\"user_data \" + full_name);\n        console.log(\"email \" + email);\n        if (status == 'SUCCESS') {\n          localStorage.setItem(\"token\", token);\n          localStorage.setItem(\"full_name\", full_name);\n          localStorage.setItem(\"email\", email);\n          console.log(\"got to dashboard\");\n          this.loading = false;\n          this.router.navigate(['dashboard']);\n        } else {\n          console.log(\"FAILED\");\n          this.loading = false;\n        }\n        // let retrieve_patient_details = JSON.stringify(results_body);\n        // var token = results_body[\"data\"][\"token\"];\n        // localStorage.setItem(\"token\", token);\n      }).catch(error => {\n        this.loading = false;\n        console.log(\"Promise rejected with \" + JSON.stringify(error));\n        alert(\"Wrong Code. Please try again\");\n      });\n    }\n  }\n  VerificationComponent.ɵfac = function VerificationComponent_Factory(t) {\n    return new (t || VerificationComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ApisService), i0.ɵɵdirectiveInject(i4.Location));\n  };\n  VerificationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: VerificationComponent,\n    selectors: [[\"app-verification\"]],\n    decls: 29,\n    vars: 5,\n    consts: [[1, \"h-100\", \"gradient-form\", 2, \"background-color\", \"#eee\"], [1, \"container\", \"py-5\", \"h-100\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col-xl-10\"], [1, \"mb-6\", \"flex\", \"h-10\", \"w-10\", \"cursor-pointer\", \"items-center\", \"justify-center\", \"rounded-full\", \"bg-slate-50\", \"hover:bg-slate-100\", 3, \"click\"], [\"viewBox\", \"0 0 15 30\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"h-6\", \"w-6\"], [\"d\", \"M14 1.58887L2 15.3367L14 29.0846\", \"stroke\", \"black\", \"stroke-width\", \"2\"], [1, \"card\", \"rounded-3\", \"text-black\"], [1, \"row\", 2, \"margin-top\", \"12%\"], [1, \"col-md-3\"], [1, \"col-md-6\"], [1, \"card-user\", 2, \"margin-top\", \"0%\", \"margin-bottom\", \"20%\"], [1, \"image\"], [\"src\", \"assets/img/show.jpeg\", \"alt\", \"...\", 2, \"margin-left\", \"20%\"], [2, \"margin-left\", \"20%\"], [1, \"card-header\"], [1, \"card-title\"], [1, \"card-body2\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"row\"], [1, \"col-md-8\", \"pr-1\"], [3, \"config\", \"onInputChange\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm mr-1\", 4, \"ngIf\"], [1, \"spinner-border\", \"spinner-border-sm\", \"mr-1\"]],\n    template: function VerificationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n        i0.ɵɵlistener(\"click\", function VerificationComponent_Template_div_click_4_listener() {\n          return ctx.goBack();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(5, \"svg\", 5);\n        i0.ɵɵelement(6, \"path\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(7, \"div\", 7)(8, \"div\", 8);\n        i0.ɵɵelement(9, \"div\", 9);\n        i0.ɵɵelementStart(10, \"div\", 10)(11, \"div\", 11)(12, \"div\", 12);\n        i0.ɵɵelement(13, \"img\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 14)(15, \"div\", 15)(16, \"h5\", 16);\n        i0.ɵɵtext(17, \"Verify Code\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\", 17)(19, \"form\", 18);\n        i0.ɵɵlistener(\"ngSubmit\", function VerificationComponent_Template_form_ngSubmit_19_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(20, \"div\", 19)(21, \"div\", 20)(22, \"ng-otp-input\", 21);\n        i0.ɵɵlistener(\"onInputChange\", function VerificationComponent_Template_ng_otp_input_onInputChange_22_listener($event) {\n          return ctx.onOtpChange($event);\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"div\", 19)(24, \"div\", 10)(25, \"button\", 22);\n        i0.ɵɵtemplate(26, VerificationComponent_span_26_Template, 1, 0, \"span\", 23);\n        i0.ɵɵtext(27, \" Confirm \");\n        i0.ɵɵelementEnd()()()()()()()();\n        i0.ɵɵelement(28, \"div\", 9);\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"config\", i0.ɵɵpureFunction0(4, _c0));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i5.NgOtpInputComponent, i4.NgIf],\n    styles: [\"\", \".gradient-custom-2[_ngcontent-%COMP%] {\\n        \\n        background: #fccb90;\\n\\n        \\n        background: -webkit-linear-gradient(to right, #ee7724, #bb2028, #bb2028, #bb2028);\\n\\n        \\n        background: linear-gradient(to right, #ee7724, #bb2028, #bb2028, #bb2028);\\n    }\\n\\n    @media (min-width: 768px) {\\n        .gradient-form[_ngcontent-%COMP%] {\\n            height: 100vh !important;\\n        }\\n    }\\n\\n    @media (min-width: 769px) {\\n        .gradient-custom-2[_ngcontent-%COMP%] {\\n            border-top-right-radius: .3rem;\\n            border-bottom-right-radius: .3rem;\\n        }\\n    }\\n\\n    .wrapper[_ngcontent-%COMP%] {\\n    position: relative;\\n    top: 0;\\n     height: 0vh !important; \\n}\"]\n  });\n  return VerificationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}