{"ast":null,"code":"import { Router, NavigationExtras } from '@angular/router';\nimport { ApisService } from \"../services/apis.service\";\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\nimport { SendnotificationsComponent } from '../sendnotifications/sendnotifications.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/apis.service\";\nimport * as i3 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"ng2-search-filter\";\nfunction NotificationsComponent_tbody_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tbody\")(1, \"tr\")(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\", 12);\n    i0.ɵɵlistener(\"click\", function NotificationsComponent_tbody_21_Template_td_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.details(item_r2);\n    });\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 12);\n    i0.ɵɵlistener(\"click\", function NotificationsComponent_tbody_21_Template_td_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.details(item_r2);\n    });\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"date\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i_r3 + 1, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r2.title, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r2.message, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r2.user_id, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(12, 5, item_r2.created_at, \"medium\"), \" \");\n  }\n}\nfunction NotificationsComponent_app_loader_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loader\");\n  }\n}\nexport let NotificationsComponent = /*#__PURE__*/(() => {\n  class NotificationsComponent {\n    constructor(router, api, modalService) {\n      this.router = router;\n      this.api = api;\n      this.modalService = modalService;\n      this.loading = false;\n      this.data = []; // Your data array\n      this.pageSize = 5; // Number of items per page\n      this.currentPage = 1; // Current page number\n    }\n\n    ngOnInit() {\n      this.router.routeReuseStrategy.shouldReuseRoute = function () {\n        return false;\n      };\n      this.retrieve_notifications();\n    }\n    // prevPage() {\n    //   if (this.currentPage > 1) {\n    //     this.currentPage--;\n    //     this.retrieve_users(this.currentPage--)\n    //   }\n    // }\n    // nextPage() {\n    //   if (this.currentPage < this.totalPages) {\n    //     this.currentPage++;\n    //     this.retrieve_users(this.currentPage++)\n    //   }\n    // }\n    retrieve_notifications() {\n      var token = localStorage.getItem(\"token\");\n      this.api.notification(token).then(result => {\n        var results_body = result;\n        console.log(\"results\", results_body[\"data\"]);\n        this.user_list = results_body[\"data\"];\n        console.log(\"user_list\", this.user_list);\n        this.totalPages = this.user_list.length;\n        this.loading = true;\n      }).catch(error => {\n        console.log(\"Promise rejected with \" + JSON.stringify(error));\n        this.loading = true;\n      });\n    }\n    search_item() {\n      var token = localStorage.getItem(\"token\");\n      console.log(\"Name\", this.name);\n      this.api.search(token, this.name).then(result => {\n        var results_body = result;\n        console.log(\"results\", results_body[\"data\"]);\n        this.user_list = results_body[\"data\"].people;\n        console.log(\"Search user_list\", this.user_list);\n        this.loading = true;\n      }).catch(error => {\n        console.log(\"Promise rejected with \" + JSON.stringify(error));\n        this.loading = true;\n      });\n    }\n    details(details) {\n      let navigationExtras = {\n        queryParams: {\n          user_details: JSON.stringify(details)\n        }\n      };\n      this.router.navigate(['userdetails'], navigationExtras);\n    }\n    verify(item) {\n      console.log(\"USER ID--->>\", item.id);\n      var token = localStorage.getItem(\"token\");\n      console.log(\"TOKEN HERE\", token);\n      Swal.fire({\n        title: 'Are you sure you want to verify?',\n        showDenyButton: true,\n        confirmButtonText: 'Yes',\n        denyButtonText: `No`\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.api.verifyUser(token, item.id).then(result => {\n            var results_body = result;\n            console.log(\"results\", results_body[\"data\"]);\n            console.log(\"Status\", results_body[\"status\"]);\n            this.loading = true;\n            this.router.navigate(['users']);\n            this.alertWithSuccess();\n          }).catch(error => {\n            this.erroalert();\n            // this.notReady()\n            console.log(\"Promise rejected with \" + JSON.stringify(error));\n            this.loading = true;\n          });\n        } else if (result.isDenied) {\n          //Swal.fire('Changes are not saved', '', 'info')\n        }\n      });\n    }\n    disable(item) {\n      console.log(\"USER ID--->>\", item.id);\n      var token = localStorage.getItem(\"token\");\n      console.log(\"TOKEN HERE\", token);\n      Swal.fire({\n        title: 'Are you sure you want to Disable?',\n        showDenyButton: true,\n        confirmButtonText: 'Yes',\n        denyButtonText: `No`\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.api.disableUser(token, item.id).then(result => {\n            var results_body = result;\n            console.log(\"results\", results_body[\"data\"]);\n            console.log(\"Status\", results_body[\"status\"]);\n            this.loading = true;\n            this.router.navigate(['users']);\n            this.diableAlert();\n          }).catch(error => {\n            this.erroalert();\n            // this.notReady()\n            console.log(\"Promise rejected with \" + JSON.stringify(error));\n            this.loading = true;\n          });\n        } else if (result.isDenied) {\n          //Swal.fire('Changes are not saved', '', 'info')\n        }\n      });\n    }\n    delete_user(item) {\n      console.log(\"USER ID--->>\", item.id);\n      var token = localStorage.getItem(\"token\");\n      console.log(\"TOKEN HERE\", token);\n      Swal.fire({\n        title: 'Are you sure you want to Delete User?',\n        showDenyButton: true,\n        confirmButtonText: 'Yes',\n        denyButtonText: `No`\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.api.delete_user(token, item.id).then(result => {\n            var results_body = result;\n            console.log(\"results\", results_body[\"data\"]);\n            console.log(\"Status\", results_body[\"status\"]);\n            this.loading = true;\n            this.router.navigate(['users']);\n            this.diableAlert();\n          }).catch(error => {\n            this.erroalert();\n            // this.notReady()\n            console.log(\"Promise rejected with \" + JSON.stringify(error));\n            this.loading = true;\n          });\n        } else if (result.isDenied) {\n          //Swal.fire('Changes are not saved', '', 'info')\n        }\n      });\n    }\n    alertWithSuccess() {\n      Swal.fire('Yay!', 'User Verified succesfully!', 'success');\n    }\n    erroalert() {\n      Swal.fire({\n        icon: 'error',\n        title: 'Oops...',\n        text: 'Something went wrong!',\n        footer: '<a href>Why do I have this issue?</a>'\n      });\n    }\n    diableAlert() {\n      Swal.fire({\n        icon: 'error',\n        title: 'Suspended',\n        text: 'User Suspended'\n      });\n    }\n    send() {\n      // console.log(\"USER ID HERE IS ??::\", details)\n      // let data = {\n      //   details: details\n      // }\n      const modalRef = this.modalService.open(SendnotificationsComponent);\n      // modalRef.componentInstance.fromParent = data;\n      // modalRef.result.then((result) => {\n      //   console.log(result);\n      // }, (reason) => {\n      // });\n    }\n\n    decide() {\n      Swal.fire({\n        title: 'Do you want to save the changes?',\n        showDenyButton: true,\n        showCancelButton: true,\n        confirmButtonText: 'Save',\n        denyButtonText: `Don't save`\n      }).then(result => {\n        /* Read more about isConfirmed, isDenied below */\n        if (result.isConfirmed) {\n          Swal.fire('Saved!', '', 'success');\n        } else if (result.isDenied) {\n          Swal.fire('Changes are not saved', '', 'info');\n        }\n      });\n    }\n  }\n  NotificationsComponent.ɵfac = function NotificationsComponent_Factory(t) {\n    return new (t || NotificationsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ApisService), i0.ɵɵdirectiveInject(i3.NgbModal));\n  };\n  NotificationsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NotificationsComponent,\n    selectors: [[\"app-notifications\"]],\n    decls: 26,\n    vars: 5,\n    consts: [[1, \"row\"], [1, \"col-md-12\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-title\"], [1, \"card-body\"], [1, \"table-responsive\"], [1, \"table\"], [1, \"text-primary\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-secondary\", \"btn-round\", 3, \"click\"], [4, \"ngIf\"], [3, \"click\"]],\n    template: function NotificationsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"div\", 0);\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"h4\", 4);\n        i0.ɵɵtext(6, \" NOTIFICATIONS\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"table\", 7)(10, \"thead\", 8)(11, \"th\");\n        i0.ɵɵtext(12, \" No \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"th\");\n        i0.ɵɵtext(14, \" NOTIFICATION TITLE \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"th\");\n        i0.ɵɵtext(16, \" NOTIFICATION MESSAGE \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"th\");\n        i0.ɵɵtext(18, \" USER \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"th\");\n        i0.ɵɵtext(20, \" DATE \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(21, NotificationsComponent_tbody_21_Template, 13, 8, \"tbody\", 9);\n        i0.ɵɵpipe(22, \"filter\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function NotificationsComponent_Template_button_click_23_listener() {\n          return ctx.send();\n        });\n        i0.ɵɵtext(24, \"Send Push Notification\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵtemplate(25, NotificationsComponent_app_loader_25_Template, 1, 0, \"app-loader\", 11);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(21);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(22, 2, ctx.user_list, ctx.searchText));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n      }\n    },\n    directives: [i4.NgForOf, i4.NgIf],\n    pipes: [i5.Ng2SearchPipe, i4.DatePipe],\n    styles: [\"\", \".pagination[_ngcontent-%COMP%] {\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        margin-top: 20px;\\n    }\\n\\n    .pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n        padding: 5px 10px;\\n        border: 1px solid #ccc;\\n        background-color: #fff;\\n        cursor: pointer;\\n    }\\n\\n    .pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n        background-color: #f2f2f2;\\n    }\\n\\n    .pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n        margin: 0 10px;\\n    }\\n\\n    .verticc[_ngcontent-%COMP%] {\\n        display: flex;\\n        margin-top: 10%;\\n        align-items: center;\\n    }\"]\n  });\n  return NotificationsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}