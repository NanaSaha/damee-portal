{"ast":null,"code":"import { NgbModal, ModalDismissReasons } from '@ng-bootstrap/ng-bootstrap';\nimport { Location } from '@angular/common';\nimport { ApisService } from \"../services/apis.service\";\n// import { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { ReasonsComponent } from '../reasons/reasons.component';\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ngxCsv } from 'ngx-csv/ngx-csv';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../services/apis.service\";\nfunction TransactionsComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"div\", 30)(2, \"span\", 31);\n    i0.ɵɵelement(3, \"img\", 32)(4, \"noscript\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 33)(6, \"p\")(7, \"span\", 19);\n    i0.ɵɵtext(8, \"Current Owner\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"a\", 34);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"p\", 35);\n    i0.ɵɵtext(12, \"Available for \");\n    i0.ɵɵelementStart(13, \"span\", 23);\n    i0.ɵɵtext(14, \"Purchase\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"p\", 36)(16, \"span\", 19);\n    i0.ɵɵtext(17, \"Value: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"span\", 23);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"src\", item_r1 == null ? null : item_r1.card == null ? null : item_r1.card.owner == null ? null : item_r1.card.owner.photo_url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"srcset\", item_r1 == null ? null : item_r1.card == null ? null : item_r1.card.owner == null ? null : item_r1.card.owner.photo_url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(item_r1 == null ? null : item_r1.card == null ? null : item_r1.card.owner == null ? null : item_r1.card.owner.stage_name);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate1(\"direct \", item_r1 == null ? null : item_r1.shares, \"%\");\n  }\n}\nexport let TransactionsComponent = /*#__PURE__*/(() => {\n  class TransactionsComponent {\n    constructor(modalService, route, router, location, api) {\n      this.modalService = modalService;\n      this.route = route;\n      this.router = router;\n      this.location = location;\n      this.api = api;\n      this.loading = false;\n      this.slideConfig = {\n        \"slidesToShow\": 1,\n        \"slidesToScroll\": 1\n      };\n      this.fileName = 'ExcelSheet.xlsx';\n      this.vdata = [{\n        id: 'VE91PLkx8Skili0oxSj4',\n        owner_id: 'KNlFvBHg0lgM1YQTRdcD',\n        artist_info: 'E Choke',\n        production_info: 'D Black Avenue Muzik signee, Sefa delivers her fir…y, DopeNation, and many other top-notch lyricist.',\n        lyrics: 'E choke ooo\\r\\nSefa\\r\\nSele\\r\\nKwasi pɛ dedɛ\\r\\nGirls girl…s girls so yɛ kyeli\\r\\nWɔ pɛ dedeɛ\\r\\nYɛn so yɛ kyeli'\n      }];\n    }\n    open() {\n      this.modalService.open(ReasonsComponent, {\n        ariaLabelledBy: 'modal-basic-title'\n      }).result.then(result => {\n        this.closeResult = `Closed with: ${result}`;\n      }, reason => {\n        this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\n      });\n    }\n    exportexcel(data, filename) {}\n    downloadCSV(data) {\n      console.log(\"DATA COMING:::\", data);\n      console.log(\"DATAthis::\", this.vdata);\n      var ddt = JSON.stringify(data);\n      this.dat = [];\n      this.dat.push({\n        ddt\n      });\n      console.log(\"DATAthis 2::\", this.dat);\n      const jsonObject = {\n        name: \"John Doe\",\n        age: 30,\n        email: \"johndoe@example.com\"\n      };\n      // Create an empty array\n      const jsonArray = [];\n      // Push the JSON object to the array\n      jsonArray.push(data);\n      // Output the JSON array\n      console.log(jsonArray);\n      var options = {\n        title: 'User Details',\n        fieldSeparator: ',',\n        quoteStrings: '\"',\n        decimalseparator: '.',\n        showLabels: false,\n        noDownload: false,\n        showTitle: false,\n        useBom: false,\n        headers: ['id', 'owner_id', 'artist_info', 'production_info', 'lyrics']\n      };\n      new ngxCsv(jsonArray, \"Damee\", options);\n    }\n    getDismissReason(reason) {\n      if (reason === ModalDismissReasons.ESC) {\n        return 'by pressing ESC';\n      } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\n        return 'by clicking on a backdrop';\n      } else {\n        return `with: ${reason}`;\n      }\n    }\n    goBack() {\n      this.location.back();\n    }\n    ngOnInit() {\n      this.router.routeReuseStrategy.shouldReuseRoute = function () {\n        return false;\n      };\n      // Get routed data from Clicked button in Previous route\n      // Get route data from Browser History\n      console.log(history.state.data);\n      this.route.queryParams.subscribe(params => {\n        if (params && params.market_details) {\n          this.market_details = JSON.parse(params.market_details);\n          console.log(\"card_details IS  \", this.market_details);\n          console.log(\"=-----market_details IS-----  \", this.market_details[0].id);\n        }\n      }, err => {\n        console.log(err);\n      });\n    }\n    approve(id) {\n      console.log(\"approve--->>\", id);\n      var token = localStorage.getItem(\"token\");\n      console.log(\"TOKEN HERE\", token);\n      console.log(\"id\", id);\n      console.log(\"status\", true);\n      let submit_for_distribution = {\n        \"submit_for_distribution\": false\n      };\n      this.api.updateCard(token, id, submit_for_distribution).then(result => {\n        var results_body = result;\n        console.log(\"results\", results_body[\"data\"]);\n        console.log(\"Status\", results_body[\"status\"]);\n        this.loading = true;\n        this.router.navigate(['cards']);\n        this.alertWithSuccess();\n      }).catch(error => {\n        this.erroalert();\n        // this.notReady()\n        console.log(\"Promise rejected with \" + JSON.stringify(error));\n        this.loading = true;\n      });\n    }\n    disapprove(id) {\n      console.log(\"approve--->>\", id);\n      var token = localStorage.getItem(\"token\");\n      console.log(\"TOKEN HERE\", token);\n      console.log(\"id\", id);\n      console.log(\"status\", true);\n      this.api.lockCard(token, id).then(result => {\n        var results_body = result;\n        console.log(\"results\", results_body[\"data\"]);\n        console.log(\"Status\", results_body[\"status\"]);\n        this.loading = true;\n        this.router.navigate(['cards']);\n        this.diableAlert();\n      }).catch(error => {\n        this.erroalert();\n        //this.notReady()\n        console.log(\"Promise rejected with \" + JSON.stringify(error));\n        this.loading = true;\n      });\n    }\n    publish(card_id) {\n      console.log(\"Youtube\", this.youtube_link);\n      console.log(\"Apple Music\", this.apple_link);\n      console.log(\"Spotify\", this.spotify_link);\n      console.log(\"Deezer\", this.deezer_link);\n      console.log(\"card_id\", card_id);\n      // this.router.navigate(['card-details']);\n      this.alertPublished();\n      console.log(\"--delting ads\");\n      var token = localStorage.getItem(\"token\");\n      console.log(\"TOKEN HERE\", token);\n      console.log(\"id\", this.youtube_link);\n      this.api.publishId(token, card_id, this.apple_link, this.youtube_link, this.spotify_link, this.deezer_link).then(result => {\n        var results_body = result;\n        console.log(\"results\", results_body[\"data\"]);\n        console.log(\"Status\", results_body[\"status\"]);\n        this.loading = true;\n        this.apple_link = \"\";\n        this.youtube_link = \"\";\n        this.spotify_link = \"\";\n        this.deezer_link = \"\";\n        // this.router.navigate(['adverts']);\n      }).catch(error => {\n        console.log(\"Promise rejected with \" + JSON.stringify(error));\n        this.loading = true;\n      });\n    }\n    gotoCardDetails(id) {\n      var token = localStorage.getItem(\"token\");\n      console.log(\"TOKEN HERE\", token);\n      console.log(\"ID HERE\", id);\n      this.api.cardDetails(token, id).then(result => {\n        var results_body = result;\n        console.log(\"results\", results_body[\"data\"]);\n        this.cardDet = results_body[\"data\"];\n        console.log(\"cardDet\", this.cardDet);\n        let navigationExtras = {\n          queryParams: {\n            card_details: JSON.stringify(this.cardDet)\n          }\n        };\n        this.router.navigate(['show-listings-details'], navigationExtras);\n        this.loading = true;\n      }).catch(error => {\n        console.log(\"Promise rejected with \" + JSON.stringify(error));\n        this.loading = true;\n      });\n    }\n    simpleAlert() {\n      Swal.fire('Hello Angular');\n    }\n    alertWithSuccess() {\n      Swal.fire('...', 'Card approved succesfully!', 'success');\n    }\n    alertPublished() {\n      Swal.fire('...', 'Card published succesfully!', 'success');\n    }\n    erroalert() {\n      Swal.fire({\n        icon: 'error',\n        title: 'Oops...',\n        text: 'Something went wrong!',\n        footer: '<a href>Why do I have this issue?</a>'\n      });\n    }\n    diableAlert() {\n      Swal.fire({\n        icon: 'error',\n        title: 'Locked',\n        text: 'Card Locked'\n      });\n    }\n    notReady() {\n      Swal.fire({\n        icon: 'error',\n        title: 'In Progress...',\n        text: 'Feature not ready'\n      });\n    }\n    topend() {\n      Swal.fire({\n        position: 'top-end',\n        icon: 'success',\n        title: 'Your work has been saved',\n        showConfirmButton: false,\n        timer: 1500\n      });\n    }\n    confirmBox() {\n      Swal.fire({\n        title: 'Are you sure want to remove?',\n        text: 'You will not be able to recover this file!',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Yes, delete it!',\n        cancelButtonText: 'No, keep it'\n      }).then(result => {\n        if (result.value) {\n          Swal.fire('Deleted!', 'Your imaginary file has been deleted.', 'success');\n        } else if (result.dismiss === Swal.DismissReason.cancel) {\n          Swal.fire('Cancelled', 'Your imaginary file is safe :)', 'error');\n        }\n      });\n    }\n    toast() {\n      const Toast = Swal.mixin({\n        toast: true,\n        position: 'top-end',\n        showConfirmButton: false,\n        timer: 3000,\n        timerProgressBar: true,\n        didOpen: toast => {\n          toast.addEventListener('mouseenter', Swal.stopTimer);\n          toast.addEventListener('mouseleave', Swal.resumeTimer);\n        }\n      });\n      Toast.fire({\n        icon: 'success',\n        title: 'Signed in successfully'\n      });\n    }\n  }\n  TransactionsComponent.ɵfac = function TransactionsComponent_Factory(t) {\n    return new (t || TransactionsComponent)(i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.Location), i0.ɵɵdirectiveInject(i4.ApisService));\n  };\n  TransactionsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TransactionsComponent,\n    selectors: [[\"app-transactions\"]],\n    decls: 44,\n    vars: 8,\n    consts: [[1, \"mb-6\", \"flex\", \"h-10\", \"w-10\", \"cursor-pointer\", \"items-center\", \"justify-center\", \"rounded-full\", \"bg-slate-50\", \"hover:bg-slate-100\", 3, \"click\"], [\"viewBox\", \"0 0 15 30\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"h-6\", \"w-6\"], [\"d\", \"M14 1.58887L2 15.3367L14 29.0846\", \"stroke\", \"black\", \"stroke-width\", \"2\"], [2, \"font-size\", \"30px\", \"text-align\", \"center\", \"font-weight\", \"800\"], [1, \"min-h-[20rem]\", \"rounded-10\", \"bg-white\", \"p-20p\", \"pb-28\", \"pt-8\", \"md:min-h-[40rem]\", \"md:py-20p\", 2, \"width\", \"70%\", \"margin-left\", \"10%\"], [1, \"grid\", \"w-full\", \"grid-cols-1\", \"gap-20p\", 3, \"click\"], [1, \"flex\", \"w-full\", \"items-center\", \"justify-start\", \"gap-15p\"], [1, \"relative\", \"h-[98px]\", \"w-[100px]\", \"md:h-[187px]\", \"md:w-[189px]\"], [2, \"box-sizing\", \"border-box\", \"display\", \"block\", \"overflow\", \"hidden\", \"width\", \"initial\", \"height\", \"initial\", \"background\", \"none\", \"opacity\", \"1\", \"border\", \"0px\", \"margin\", \"0px\", \"padding\", \"0px\", \"inset\", \"0px\"], [\"sizes\", \"100vw\", \"decoding\", \"async\", \"data-nimg\", \"fill\", 1, \"appear\", \"rounded-10\", \"bg-gray-2\", \"object-cover\", 3, \"srcset\", \"src\"], [1, \"grid\", \"w-[55%]\", \"grid-cols-1\", \"md:w-[59%]\", \"gap-15p\"], [1, \"flex\", \"items-center\", \"gap-20p\"], [1, \"text-[14px]\", \"font-medium\", \"leading-tight\"], [1, \"truncate\", \"text-[26px]\", \"font-bold\", \"leading-tight\"], [1, \"relative\"], [1, \"relative\", \"flex\", \"h-[35px]\", \"w-[35px]\", \"items-center\", \"justify-center\"], [\"src\", \"/assets/img/gaugey.png\", 1, \"appear\", \"absolute\", \"w-full\", \"rounded-full\"], [1, \"pt-[2px]\", \"text-sm\", \"font-bold\", \"md:text-xl\"], [1, \"!text-[14px]\", \"inline-flex\", \"items-center\", \"justify-start\", \"gap-2.5\", \"self-stretch\"], [1, \"font-medium\"], [\"href\", \"#\", 1, \"font-bold\", \"text-blue-600\", \"underline\"], [1, \"relative\", \"flex\", \"w-full\", \"items-center\", \"justify-between\", \"leading-none\"], [1, \"!text-[14px]\"], [1, \"font-bold\"], [1, \"flex\", \"items-center\", \"justify-between\"], [1, \"text-[14px]\", \"leading-relaxed\"], [\"href\", \"/cards/community?id=Hl8SvPw2MfCuEsgE1rFj\"], [1, \"grid\", \"w-full\", \"grid-cols-1\", \"gap-20p\", \"md:grid-cols-2\"], [\"class\", \"flex items-end justify-between rounded-5 border border-gray-2 px-15p py-10p\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"items-end\", \"justify-between\", \"rounded-5\", \"border\", \"border-gray-2\", \"px-15p\", \"py-10p\"], [1, \"flex\", \"items-center\", \"gap-10p\", \"!text-[10px]\", \"md:!text-[12px]\"], [2, \"box-sizing\", \"border-box\", \"display\", \"inline-block\", \"overflow\", \"hidden\", \"width\", \"64px\", \"height\", \"64px\", \"background\", \"none\", \"opacity\", \"1\", \"border\", \"0px\", \"margin\", \"0px\", \"padding\", \"0px\", \"position\", \"relative\"], [\"decoding\", \"async\", \"data-nimg\", \"fixed\", 1, \"appear\", \"rounded-full\", \"bg-gray-2\", \"object-cover\", 2, \"position\", \"absolute\", \"inset\", \"0px\", \"box-sizing\", \"border-box\", \"padding\", \"0px\", \"border\", \"none\", \"margin\", \"auto\", \"display\", \"block\", \"width\", \"0px\", \"height\", \"0px\", \"min-width\", \"100%\", \"max-width\", \"100%\", \"min-height\", \"100%\", \"max-height\", \"100%\", 3, \"src\", \"srcset\"], [1, \"grid\", \"grid-cols-1\", \"gap-1\"], [\"href\", \"#\", 1, \"font-bold\", \"underline\", \"text-prime\"], [1, \"text-[10px]\", \"font-medium\", \"leading-tight\", \"md:text-[12px]\"], [1, \"text-[12px]\"]],\n    template: function TransactionsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵlistener(\"click\", function TransactionsComponent_Template_div_click_0_listener() {\n          return ctx.goBack();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(1, \"svg\", 1);\n        i0.ɵɵelement(2, \"path\", 2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(3, \"h4\", 3);\n        i0.ɵɵtext(4, \" Marketplace Listing Details\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5);\n        i0.ɵɵlistener(\"click\", function TransactionsComponent_Template_div_click_6_listener() {\n          return ctx.gotoCardDetails(ctx.market_details[0] == null ? null : ctx.market_details[0].card == null ? null : ctx.market_details[0].card.id);\n        });\n        i0.ɵɵelementStart(7, \"div\", 6)(8, \"div\", 7)(9, \"span\", 8);\n        i0.ɵɵelement(10, \"img\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 10)(12, \"div\", 11)(13, \"div\")(14, \"span\", 12);\n        i0.ɵɵtext(15, \"Powered by\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"br\");\n        i0.ɵɵelementStart(17, \"span\", 13);\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\", 14)(20, \"div\", 15);\n        i0.ɵɵelement(21, \"img\", 16);\n        i0.ɵɵelementStart(22, \"span\", 17);\n        i0.ɵɵtext(23, \"2\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(24, \"div\", 18)(25, \"span\", 19);\n        i0.ɵɵtext(26, \"Created by\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"a\", 20);\n        i0.ɵɵtext(28);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"div\", 21)(30, \"div\", 22)(31, \"span\", 23);\n        i0.ɵɵtext(32);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(33, \"div\", 14);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(34, \"hr\");\n        i0.ɵɵelementStart(35, \"div\", 24)(36, \"h3\", 25)(37, \"span\", 23);\n        i0.ɵɵtext(38);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"span\", 19);\n        i0.ɵɵtext(40, \" available\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(41, \"a\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"div\", 27);\n        i0.ɵɵtemplate(43, TransactionsComponent_div_43_Template, 20, 4, \"div\", 28);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵpropertyInterpolate(\"srcset\", ctx.market_details[0] == null ? null : ctx.market_details[0].card == null ? null : ctx.market_details[0].card.cover_art_url, i0.ɵɵsanitizeUrl);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.market_details[0] == null ? null : ctx.market_details[0].card == null ? null : ctx.market_details[0].card.cover_art_url, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.market_details[0] == null ? null : ctx.market_details[0].card == null ? null : ctx.market_details[0].card.song.title);\n        i0.ɵɵadvance(10);\n        i0.ɵɵtextInterpolate1(\"\", ctx.market_details[0] == null ? null : ctx.market_details[0].stage_name, \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate2(\"\", ctx.market_details[0] == null ? null : ctx.market_details[0].listing_target, \" \", ctx.market_details[0] == null ? null : ctx.market_details[0].list_percentage, \"%\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\"\", ctx.market_details == null ? null : ctx.market_details.length, \" listings\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.market_details);\n      }\n    },\n    directives: [i3.NgForOf],\n    styles: [\".h-\\\\__ph-0__[_ngcontent-%COMP%]{height:20rem!important}.w-41[_ngcontent-%COMP%]{width:20rem!important}\", \".loader-wrapper[_ngcontent-%COMP%] {\\n        width: 100%;\\n        height: 100%;\\n        position: absolute;\\n        top: 0;\\n        left: 0;\\n        background-color: #ffffffe8;\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n    }\\n\\n    .loader[_ngcontent-%COMP%] {\\n        display: inline-block;\\n        width: 100px;\\n        height: 100px;\\n        position: relative;\\n\\n        animation: loader 2s infinite ease;\\n    }\\n\\n    .loader-inner[_ngcontent-%COMP%] {\\n        vertical-align: top;\\n        display: inline-block;\\n        width: 100%;\\n        background-color: #fff;\\n\\n    }\\n\\n\\n    .h-56[_ngcontent-%COMP%] {\\n        height: 13rem !important;\\n    }\\n\\n    h2[_ngcontent-%COMP%], .h2[_ngcontent-%COMP%] {\\n        font-size: 2.5em;\\n        margin-bottom: 0px !important;\\n    }\\n\\n    .leff[_ngcontent-%COMP%] {\\n        margin-left: 50px;\\n    }\"]\n  });\n  return TransactionsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}